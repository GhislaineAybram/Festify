import{d as T,K as i,o as p,G as N,H as u,g as l,f as d,a as e,P as M,t as s,Q as P,b as j,w as z,c as h,I as w,N as k,S as E,J as C,U as G,_ as I}from"./B8_L-OGO.js";import{r as L}from"./D3YCyNo-.js";import{Y,h as S,G as O,V as R,S as F}from"./B9pIG8-N.js";import{_ as H}from"./B4SFZziU.js";import{a as J}from"./g_rFK4m0.js";import"./T4br1-qd.js";const K={class:"fixed inset-0 z-10 w-screen overflow-y-auto"},Q={class:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"},q={class:"bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4"},W={class:"sm:flex sm:items-start"},X={class:"mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-green-100 sm:mx-0 sm:h-10 sm:w-10"},Z={class:"mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left"},ee={class:"mt-2"},te={class:"text-sm text-gray-500"},se={class:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6"},oe=T({__name:"AlertCelebrationCreation",setup(U){const n=i(!0);return(m,r)=>{const x=P;return p(),N(d(F),{as:"template",show:n.value},{default:u(()=>[l(d(Y),{class:"relative z-10",onClose:r[1]||(r[1]=c=>n.value=!1)},{default:u(()=>[l(d(S),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:u(()=>r[2]||(r[2]=[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1)])),_:1}),e("div",K,[e("div",Q,[l(d(S),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:u(()=>[l(d(O),{class:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg"},{default:u(()=>[e("div",q,[e("div",W,[e("div",X,[l(d(L),{class:"h-6 w-6 text-green-600","aria-hidden":"true"})]),e("div",Z,[l(d(R),{as:"h3",class:"text-base font-semibold leading-6 text-gray-900"},{default:u(()=>[M(s(m.$t("celebration.successfull")),1)]),_:1}),e("div",ee,[e("p",te,s(m.$t("celebration.success_message")),1)])])])]),e("div",se,[l(x,{to:"/"},{default:u(()=>[e("button",{ref:"cancelButtonRef",type:"button",class:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto",onClick:r[0]||(r[0]=c=>n.value=!1)},s(m.$t("button.ok")),513)]),_:1})])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])}}}),ae={class:"main flex flex-col items-center"},le={key:0,id:"celebration-details"},ie={class:"mx-auto mt-4 max-w-2xl text-center"},ne={class:"text-3xl font-bold tracking-tight text-gray-900 sm:text-3xl"},re={class:"grid grid-cols-1 gap-x-8 gap-y-6 sm:grid-cols-2"},de={for:"celebration-title",class:"block text-sm font-semibold leading-6 text-gray-900"},ce={class:"mt-2.5"},ue={for:"celebration-type",class:"block text-sm font-semibold leading-6 text-gray-900"},me={class:"mt-2.5"},fe={class:"sm:col-span-2"},pe={for:"celebration-description",class:"block text-sm font-semibold leading-6 text-gray-900"},be={class:"mt-2.5"},ge={for:"celebration-date",class:"block text-sm font-semibold leading-6 text-gray-900"},ve={class:"mt-2.5"},ye={for:"celebration-hour",class:"block text-sm font-semibold leading-6 text-gray-900"},_e={class:"mt-2.5"},xe={class:"sm:col-span-2"},he={for:"celebration-address",class:"block text-sm font-semibold leading-6 text-gray-900"},we={class:"mt-2.5"},ke={class:"mt-10"},$e={key:0,class:"text-sm text-red-500"},Ve={id:"celebration-creation",type:"submit",class:"block w-full rounded-md bg-indigo-600 px-3.5 py-2.5 text-center font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"},Ce={key:1},Se=T({__name:"creation",async setup(U){let n,m;const{auth:r}=j(),{data:{user:x}}=([n,m]=z(()=>r.getUser()),n=await n,m(),n),c=i(""),b=i(""),g=i(""),v=i(),f=i(),y=i(""),$=i(!1),_=i("");async function A(){if(!c.value.trim()||!b.value||!g.value.trim()||!v.value||!f.value||!y.value.trim()){_.value="Tous les champs sont obligatoires.";return}const a=f.value?f.value.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit",second:"2-digit"}):null;_.value="";const t=await $fetch("/api/celebration",{method:"POST",body:{name:c.value,celebration_type:b.value,description:g.value,date:v.value,hour:a,address:y.value,author:x.id}});if(t.error){_.value=`Erreur lors de la création de l’événement : ${t.error}`,console.error("Erreur lors de la création de l’événement :",t.error);return}c.value="",b.value="",g.value="",v.value=null,f.value=null,y.value="",$.value=!0}return(a,t)=>{const V=J,B=oe,D=H;return p(),h("main",ae,[d(x)?(p(),h("div",le,[e("div",ie,[e("h1",ne,s(a.$t("celebration.creation-title")),1)]),e("form",{method:"POST",class:"mx-auto mt-10 max-w-xl sm:mt-10",onSubmit:G(A,["prevent"])},[e("div",re,[e("div",null,[e("label",de,s(a.$t("celebration.title")),1),e("div",ce,[w(e("input",{id:"celebration-title","onUpdate:modelValue":t[0]||(t[0]=o=>c.value=o),type:"text",name:"celebration-title",autocomplete:"celebration-title",class:"block w-full rounded-md border-0 px-3.5 py-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[k,c.value]])])]),e("div",null,[e("label",ue,s(a.$t("celebration.type")),1),e("div",me,[w(e("select",{id:"celebration-type","onUpdate:modelValue":t[1]||(t[1]=o=>b.value=o),name:"celebration-type",autocomplete:"celebration-type",class:"block w-full rounded-md border-0 px-3.5 py-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},t[6]||(t[6]=[e("option",{value:"",disabled:""}," Choisissez un type ",-1),e("option",{value:"d016615d-6ca8-42a9-9abb-54a35a3234df"}," Anniversary ",-1),e("option",{value:"3d41671f-6103-480f-b3ae-16191fb1bd11"}," Baby shower ",-1),e("option",{value:"1bbb698b-6276-4e1f-91a0-544e045fca71"}," New Year ",-1)]),512),[[E,b.value]])])]),e("div",fe,[e("label",pe,s(a.$t("celebration.description")),1),e("div",be,[w(e("textarea",{id:"celebration-description","onUpdate:modelValue":t[2]||(t[2]=o=>g.value=o),name:"celebration-description",rows:"4",class:"block w-full rounded-md border-0 px-3.5 py-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[k,g.value]])])]),e("div",null,[e("label",ge,s(a.$t("celebration.date")),1),e("div",ve,[l(V,{id:"datepicker-month",modelValue:v.value,"onUpdate:modelValue":t[3]||(t[3]=o=>v.value=o),class:"flex-auto","date-format":"dd/mm/yy",variant:"filled","show-icon":"",fluid:"","show-on-focus":!1,"input-id":"buttondisplay"},null,8,["modelValue"])])]),e("div",null,[e("label",ye,s(a.$t("celebration.hour")),1),e("div",_e,[l(V,{id:"datepicker-timeonly",modelValue:f.value,"onUpdate:modelValue":t[4]||(t[4]=o=>f.value=o),"time-only":"",fluid:""},null,8,["modelValue"])])]),e("div",xe,[e("label",he,s(a.$t("celebration.address")),1),e("div",we,[w(e("input",{id:"celebration-address","onUpdate:modelValue":t[5]||(t[5]=o=>y.value=o),type:"text",name:"celebration-address",autocomplete:"celebration-address",class:"block w-full rounded-md border-0 px-3.5 py-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[k,y.value]])])])]),e("div",ke,[_.value?(p(),h("span",$e,s(_.value),1)):C("",!0),e("button",Ve,s(a.$t("celebration.creation-button")),1)])],32),$.value?(p(),N(B,{key:0,class:"alert"})):C("",!0)])):(p(),h("div",Ce,[l(D,{class:"alert"})]))])}}}),Me=I(Se,[["__scopeId","data-v-ac0358b7"]]);export{Me as default};
